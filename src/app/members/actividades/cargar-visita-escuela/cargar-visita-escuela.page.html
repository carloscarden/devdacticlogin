<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title class="textoTitulo">Visita Escuela</ion-title>
  </ion-toolbar>
</ion-header>
<!--{{ diagnostic }}-->
<ion-content padding>
    <form #visitaForm="ngForm"  (ngSubmit)="onSubmit()">

      <ion-item>
        <ion-label position="stacked" class="textoBold" color="success">CUE</ion-label>
        <ion-input type="text" [(ngModel)]="visita.establecimiento.cue" name="cue" #cue="ngModel" required></ion-input>
        <div *ngIf="!(cue.valid || cue.pristine)" class="invalid-feedback">
            La escuela es requerida
        </div>
      </ion-item>    


      <ion-item>
        <ion-label position="stacked" class="textoBold" color="success">Inicio</ion-label>
        <ion-datetime displayFormat="DD/MMM/YYYY, HH:mm" pickerFormat="DD-MM-YYYY HH:mm" [(ngModel)]="visita.inicio" name="inicio" #inicio="ngModel" required></ion-datetime>
        <div *ngIf="!(inicio.valid || inicio.pristine)" class="invalid-feedback">
           La fecha de inicio es requerida
        </div>
      </ion-item>
        

      <ion-item>
        <ion-label position="stacked" class="textoBold" color="success">Fin</ion-label>
        <ion-datetime displayFormat="DD/MMM/YYYY, HH:mm" pickerFormat="DD-MM-YYYY HH:mm" [(ngModel)]="visita.fin" name="fin" #fin="ngModel" required></ion-datetime>
        <div *ngIf="!(fin.valid || fin.pristine)" class="invalid-feedback">
              La fecha de fin es requerida
        </div>
      </ion-item>
      
      
      <ion-item>
         <ion-label position="stacked" class="textoBold" color="success">Motivo</ion-label>
         <ionic-selectable
            item-content
            [(ngModel)]="visita.motivo"
            name="motivoVisita"
            itemValueField="codigo"
            itemTextField="descripcion"
            [items]="motivos"
            [canSearch]="true"
            (onSearch)="searchMotivos($event)">
          </ionic-selectable>
      </ion-item>   


      <ion-item>
        <ion-label position="stacked" class="textoBold" color="success">Observaciones</ion-label>
        <ion-input type="text" [(ngModel)]="visita.observaciones" name="observaciones" #observaciones="ngModel"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked" class="textoBold" color="success">Inspector Acompa√±ante</ion-label>
        <ion-input type="text" [(ngModel)]="visita.acompaniante" name="acompaniante" #acompaniante="ngModel"></ion-input>
      </ion-item>


      <ion-list class="centerGroup">
          <ion-radio-group [(ngModel)]="visita.urgente" name="urgente"  #urgente="ngModel">
            <ion-list-header >
              <ion-label class="textoBold" color="success">Tipo de visita</ion-label>
            </ion-list-header>
        
            <ion-item>
              <ion-label>Urgente</ion-label>
              <ion-radio slot="start" value="T" checked></ion-radio>
            </ion-item>
        
            <ion-item>
              <ion-label>No Urgente</ion-label>
              <ion-radio slot="start" value="F"></ion-radio>
            </ion-item>
          </ion-radio-group>
      </ion-list>
<!-- ********************************* Para plataformas moviles *********************************************************************** -->
      <!--<div *ngIf="esPlataformaMovil">
        <ion-item>
          <h4 *ngIf="images.length == 0" text-center>CARGA CERTIFICADO!</h4>
          <ion-list>
             <ion-item *ngFor="let img of images; index as pos" text-wrap>
                <ion-thumbnail slot="start">
                  <ion-img [src]="img.path"></ion-img>
                </ion-thumbnail>
                <ion-label>
                    {{ img.name }}
                </ion-label>
                <ion-button slot="end" fill="clear" (click)="deleteImage(img, pos)">
                    <ion-icon slot="icon-only" name="trash"></ion-icon>
                </ion-button>
              </ion-item>
          </ion-list>
        </ion-item>

  
        <ion-item>
            <ion-button fill="clear" expand="full"  (click)="selectImage()">
              <ion-icon slot="end" name="camera">
              ADJUNTAR</ion-icon> Select Image
            </ion-button>
        </ion-item>
      </div>-->

<!-- **********************************  Para plataformas web  ********************************************************************** -->
        <hr>
        <ion-label class="textoBold" color="success" *ngIf="imagesWeb.length == 0" text-center>Seleccione una imagen</ion-label>
          <ion-list>
              <ion-item *ngFor="let img of imagesWeb; index as pos" text-wrap>
                  <ion-thumbnail slot="start">  
                      <ion-img [src]="img.archivo"></ion-img>
                  </ion-thumbnail>
        

                  <ion-button slot="end" fill="clear" (click)="deleteImageWeb(pos)">
                      <ion-icon slot="icon-only" name="trash"></ion-icon>
                  </ion-button>
              </ion-item> 
          </ion-list>

          <ion-item>
            <ion-label id="profile_image" color="primary" stacked>Imagen WEB</ion-label>
            <ion-input type="file" (change)="changeListener($event)"></ion-input>
          </ion-item>
<!-- ******************************************************************************************************** -->
         
      <div class="form-group">
        <img *ngIf="loading" class="pl-2" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
      </div>

      <!--<ion-fab-button vertical="bottom" horizontal="end" slot="fixed" type="submit" [disabled]="!visitaForm.form.valid" color="tertiary">
          <ion-icon name="checkmark"></ion-icon>
      </ion-fab-button>  -->   

      <ion-fab vertical="bottom" horizontal="end" slot="icon-only">
          <ion-button type="submit" [disabled]="!visitaForm.form.valid" color="tertiary">
                <ion-icon name="checkmark"></ion-icon>
          </ion-button>
      </ion-fab> 
  </form>


</ion-content>

<!--<ion-footer>
  <ion-toolbar color="primary">
    <ion-title class="textoFooter"><strong>Buenos Aires</strong> Provincia</ion-title>
  </ion-toolbar>
</ion-footer>-->